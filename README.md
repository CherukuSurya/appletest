# appletest



The short url application developed using Java8, Spring Boot, Jersey, Testng and MySql. 

Import this application as Maven application in IDE and run the applicaiton as Spring Boot application. The spring boots internal tomcat server start and listening for the requests on the port 9000

Once the application is started user will be able to access the home page using localhost:9000/shorturl/home. This page has the text box and submit button. Once the enters the url in the text box and click the submit button the UI will make AJAX call to the  API localhost:9000/shorturl?url=. This API returns the crated short url which is shown on the UI. Once user eneters the short url in the browser, the UI will call the API  localhost:9000/shorturl/{shortUrl}, this API gets the actual url and send a redirect response to browser which will navigate to the actaul url.

The APIs of this application
GET localhost:9000/shorturl/home(Loads the homepage)
POST localhost:9000/shorturl?url=(Creates or gets the short url)
GET localhost:9000/shorturl/{shortUrl} (Redirects the actual url for the given short url)


The long Url can be shorten using different approches.For all approaches it will be better to use the RDBMS or NoSql (then the in memory HashMap) to store the generated short url a for given long url. We can use the cache on the backend to store the frequently accessed urls. Also while shortening the url we can ommit some of the common information like port number.

One approach can be to use the Java String's hashCode method, which will give integer hash value. But there might be a chance of hash collision for different long urls which may not provide actual url when one to one mapping is done. 

Other approach can be to use the RDBMS auto generated id while inserting new url and use this autogenerated id to create a unique string and save this unqiue string in the DB. When we use the RDBMS we have to consider the actual url lenghts as there is limit on the varchar  columns. But textcolumn or blog column can't be used as the RDMBS doesn't allow index on these columns which will slow down the searching of the url when there are large number of rows in the table

For the simplicity purpose I used the modified second approach where I am using only two columns one is a auto generate bigint id and other one is varchar which will store the actual url. As MySql has a limit on the varchar length I used only use 1000 characters long urls. Once UI sends the url to backend, backend will first check whether the url is present in the DB. If the url is already present in the DB backend will send the id of that row to the UI, other wise backend will insert the new row using url and send the auto generated id as short url to UI. When the user enters the short url in the browser, the backend will search for the short url against the id and send the url a redirect response to the UI if a correspondinfg row is find in the UI 




JDBC table creation script

CREATE TABLE `Urlmap` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `Url` varchar(1000) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `Url` (`Url`),
  UNIQUE KEY `ID_UNIQUE` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
